jobs:
  - job: Nuke
    displayName: 'Nuke'
    pool: 
      name: 'Enterprise Architecture - Default Linux'
    workspace:
      clean: all
    steps:
      - checkout: self
        clean: true
        persistCredentials: true
      - task: Bash@3
        displayName: 'Nuke Tool Install'
        inputs:
          targetType: 'inline'
          script: dotnet tool restore
          workingDirectory: '$(Build.SourcesDirectory)'
      - task: Bash@3
        displayName: 'Nuke Build'
        env:
          NuGetApiKey: $(NUGET_API_KEY)
          NuGetPackageSource: $(NUGET_PACKAGE_SOURCE)
        inputs:
          targetType: 'inline'
          script: dotnet nuke-build
          workingDirectory: '$(Build.SourcesDirectory)'

variables:
  - name: buildConfiguration
    value: "Release"